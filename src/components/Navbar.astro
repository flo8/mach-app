---
import ThemeIcon from './ThemeIcon.vue';
import LoginStatus from './Auth/LoginStatus.vue';
import Brand from './Brand.astro';
import { locales } from '@constants/localize';

const { menu } = locales;
console.log('base', import.meta.env.BASE_URL);
---

<nav class='py-2'>
  <div class='container flex flex-wrap items-center justify-between mx-auto'>
    <Brand size='md' />
    <div class='ml-auto lg:order-2 flex items-center'>
      <LoginStatus client:only='vue' />
      <ThemeIcon client:only='vue' />
    </div>

    <div class='flex items-center lg:hidden'>
      <button
        data-collapse-toggle='navbar'
        id='navbar-collapse-toggle'
        type='button'
        class='transition-colors inline-flex items-center p-2 ml-3 text-sm rounded-lg hover:text-link focus:outline-none focus:ring-4 focus:ring-link/70'
        aria-controls='navbar'
        aria-expanded='false'
      >
        <span class='sr-only'>Open main menu</span>
        <svg class='w-6 h-6' aria-hidden='true' fill='currentColor' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'>
          <path
            fill-rule='evenodd'
            d='M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z'
            clip-rule='evenodd'></path>
        </svg>
      </button>
    </div>
    <div class='hidden w-full lg:block lg:w-auto' id='navbar'>
      <ul class='flex flex-col p-3 space-y-2 border-b border-border-input lg:border-0 lg:space-y-0 lg:flex-row lg:space-x-3 lg:text-base lg:font-medium'>
        {
          menu.map((m) => (
            <li>
              <a href={`${import.meta.env.BASE_URL}${m.link}`} class:list={['menu-item', { active: Astro.url.pathname === `${import.meta.env.BASE_URL}${m.link}` }]}>
                {m.label}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</nav>
